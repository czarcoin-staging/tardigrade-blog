<!doctype html>
<html lang="{{ $.Site.Language.Lang }}">
  {{ partial "head" . }}
  <body class="sans-serif">

    {{ block "header" . }}{{ partial "nav" . }}{{end}}

    {{ block "main" . }}{{ end }}

    {{ block "footer" . }}{{ partial "footer" . }}{{end}}

    {{ $script := .Site.Data.webpack.main }}
    {{ with $script.js }}
      <script src="{{ relURL . }}"></script>
    {{ end }}
  </body>
</html>

<script type="text/javascript">
	window.onload = function() {

		$(".homepage-post").slice(0, 9).css("display", "flex");

		if($(".homepage-post:hidden").length === 0) {
			$("#loadMore").hide()
		}
		$("#loadMore").click(function(e){ // click event for load more
			e.preventDefault();
			if($(".homepage-post:hidden").length !== 0){ // check if any hidden divs still exist
				$(".homepage-post:hidden").slice(0, 9).css("display", "flex");
				if($(".homepage-post:hidden").length === 0) {
					$("#loadMore").hide()
				}
			} else if($(".current-year .press-kit__news__article:hidden").length === 0){
				$("#loadMore").hide()
			}
		});

		$("#searchInput").on("keyup", function() {
	    var value = $(this).val().toLowerCase();
			console.log("VALUE:", value)
	    $("#posts .homepage-post").filter(function() {
	      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
				if($(".homepage-post:visible").length < 9) {
					$("#loadMore").hide()
				}
				if(value.length == 0) {
					$(".homepage-post").css("display", "none");
					$(".homepage-post").slice(0, 9).css("display", "flex");
					$("#loadMore").show()
				}
	    });
	  });

	}
</script>
